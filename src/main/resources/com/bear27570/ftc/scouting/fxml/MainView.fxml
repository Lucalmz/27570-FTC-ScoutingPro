<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<BorderPane prefHeight="720.0" prefWidth="1280.0" stylesheets="@../styles/style.css" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.bear27570.ftc.scouting.controllers.MainController">
    <top>
        <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-background-color: #2A3B4F;">
            <padding><Insets left="20" right="20" top="10" bottom="10" /></padding>
            <Label fx:id="competitionNameLabel" styleClass="header-label" text="Competition Name" />
            <Region HBox.hgrow="ALWAYS" />
            <Button onAction="#handleBackButton" text="Back to Hub" />
            <Button onAction="#handleLogout" text="Logout" styleClass="logout-button" />
        </HBox>
    </top>
    <center>
        <TabPane tabClosingPolicy="UNAVAILABLE">
            <tabs>
                <!-- SCORING TAB -->
                <Tab text="Scoring">
                    <content>
                        <VBox alignment="CENTER" spacing="20">
                            <padding><Insets top="20" right="20" bottom="20" left="20"/></padding>
                            <!-- SCORING FORM CONTENT HERE -->
                            <VBox maxWidth="400" spacing="10" styleClass="sidebar">
                                <padding><Insets top="20" right="20" bottom="20" left="20"/></padding>
                                <Label text="Match &amp; Alliance"/>
                                <TextField fx:id="matchNumberField" promptText="Match #" />
                                <HBox alignment="CENTER" spacing="5">
                                    <ToggleButton fx:id="redAllianceToggle" text="Red Alliance" HBox.hgrow="ALWAYS" maxWidth="Infinity"/>
                                    <ToggleButton fx:id="blueAllianceToggle" text="Blue Alliance" HBox.hgrow="ALWAYS" maxWidth="Infinity"/>
                                </HBox>
                                <GridPane hgap="10" vgap="5">
                                    <Label text="Team 1 #" /><TextField fx:id="team1Field" GridPane.columnIndex="1" />
                                    <Label text="Team 2 #" GridPane.rowIndex="1" /><TextField fx:id="team2Field" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                                    <columnConstraints><ColumnConstraints/><ColumnConstraints/></columnConstraints>
                                    <rowConstraints><RowConstraints/><RowConstraints/></rowConstraints>
                                </GridPane>
                                <Separator/>
                                <Label text="Score Entry"/>
                                <GridPane hgap="10" vgap="5">
                                    <Label text="Auto Artifacts" /><TextField fx:id="autoArtifactsField" text="0" GridPane.columnIndex="1" />
                                    <Label text="TeleOp Artifacts" GridPane.rowIndex="1" /><TextField fx:id="teleopArtifactsField" text="0" GridPane.columnIndex="1" GridPane.rowIndex="1" />
                                    <columnConstraints><ColumnConstraints/><ColumnConstraints/></columnConstraints>
                                    <rowConstraints><RowConstraints/><RowConstraints/></rowConstraints>
                                </GridPane>
                                <Separator/>
                                <Label text="Capabilities"/>
                                <CheckBox fx:id="team1SequenceCheck" text="Team 1 Can Sequence" />
                                <CheckBox fx:id="team2SequenceCheck" text="Team 2 Can Sequence" />
                                <CheckBox fx:id="team1L2ClimbCheck" text="Team 1 L2 Climb" />
                                <CheckBox fx:id="team2L2ClimbCheck" text="Team 2 L2 Climb" />
                                <Separator/>
                                <Label fx:id="submitterLabel" text="Submitter: " />
                                <Button onAction="#handleSubmitButtonAction" text="Submit Alliance Score" styleClass="submit-button" maxWidth="Infinity"/>
                                <Label fx:id="errorLabel" styleClass="error-label" />
                            </VBox>
                        </VBox>
                    </content>
                </Tab>
                <!-- RANKINGS TAB -->
                <Tab text="Team Rankings">
                    <content>
                        <VBox>
                            <padding><Insets top="20" right="20" bottom="20" left="20"/></padding>
                            <TableView fx:id="rankingsTableView" VBox.vgrow="ALWAYS">
                                <columns>
                                    <TableColumn fx:id="rankTeamCol" text="Team #" />
                                    <TableColumn fx:id="rankMatchesCol" text="Matches Played" />
                                    <TableColumn fx:id="rankAutoCol" text="Avg Auto Artifacts" />
                                    <TableColumn fx:id="rankTeleopCol" text="Avg TeleOp Artifacts" />
                                    <TableColumn fx:id="rankSequenceCol" text="Can Sequence?" />
                                    <TableColumn fx:id="rankL2Col" text="L2 Capable?" />
                                </columns>
                                <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/></columnResizePolicy>
                            </TableView>
                        </VBox>
                    </content>
                </Tab>
                <!-- HISTORY TAB -->
                <Tab text="Score History">
                    <content>
                        <VBox spacing="10">
                            <padding><Insets top="20" right="20" bottom="20" left="20"/></padding>
                            <TextField fx:id="searchField" promptText="Search by Match #, Team #, or Submitter..."/>
                            <TableView fx:id="historyTableView" VBox.vgrow="ALWAYS">
                                <columns>
                                    <TableColumn fx:id="histMatchCol" text="Match" />
                                    <TableColumn fx:id="histAllianceCol" text="Alliance" />
                                    <TableColumn fx:id="histTeamsCol" text="Teams" />
                                    <TableColumn fx:id="histTotalCol" text="Total Score" />
                                    <TableColumn fx:id="histSubmitterCol" text="Submitter" />
                                    <TableColumn fx:id="histTimeCol" text="Timestamp" />
                                </columns>
                                <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/></columnResizePolicy>
                            </TableView>
                        </VBox>
                    </content>
                </Tab>
            </tabs>
        </TabPane>
    </center>
</BorderPane>